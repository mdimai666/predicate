{"version":3,"file":"emmet-monaco.js","sources":["../src/index.js"],"sourcesContent":["const expandAbbreviation = (emmet, source, language) => {\r\n  let target = emmet.expandAbbreviation(source, language, language);\r\n  let result = emmet.tabStops.extract(target, { escape(ch) { return ch; } });\r\n  return result.text;\r\n};\r\n\r\nconst enableEmmet = (editor, emmet, options) => {\r\n  if (!emmet) {\r\n    throw new Error('Must include emmet.');\r\n  }\r\n  if (!editor) {\r\n    throw new Error('Must provide monaco-editor instance.');\r\n  }\r\n  editor.addCommand(monaco.KeyCode.Tab, () => {\r\n    let word = editor.model.getValueInRange(editor.getSelection());\r\n    let pos = editor.getPosition();\r\n    if (!word) {\r\n      let lineContent = editor.model.getLineContent(pos.lineNumber);\r\n      word = emmet.utils.action.extractAbbreviation(lineContent.substring(0, pos.column));\r\n    }\r\n    // Get expand text\r\n    let expandText = expandAbbreviation(emmet, word, 'html');\r\n    if (expandText) {\r\n      // replace range content: pos.column , pos.column -word.length;\r\n      let range = new monaco.Range(pos.lineNumber, pos.column - word.length, pos.lineNumber, pos.column);\r\n      let id = { major: 1, minor: 1 };\r\n      var op = { identifier: id, range, text: expandText, forceMoveMarkers: true };\r\n      editor.executeEdits('', [op]);\r\n    }\r\n  });\r\n};\r\n\r\nexport {\r\n  enableEmmet\r\n};\r\n"],"names":["expandAbbreviation","emmet","source","language","target","result","tabStops","extract","ch","text","enableEmmet","editor","options","Error","addCommand","monaco","KeyCode","Tab","word","model","getValueInRange","getSelection","pos","getPosition","lineContent","getLineContent","lineNumber","utils","action","extractAbbreviation","substring","column","expandText","range","Range","length","id","major","minor","op","identifier","forceMoveMarkers","executeEdits"],"mappings":";;;;;;AAAA,IAAMA,qBAAqB,SAArBA,kBAAqB,CAACC,KAAD,EAAQC,MAAR,EAAgBC,QAAhB,EAA6B;MAClDC,SAASH,MAAMD,kBAAN,CAAyBE,MAAzB,EAAiCC,QAAjC,EAA2CA,QAA3C,CAAb;MACIE,SAASJ,MAAMK,QAAN,CAAeC,OAAf,CAAuBH,MAAvB,EAA+B;UAAA,kBAASI,EAAT,EAAa;aAASA,EAAP;;GAA9C,CAAb;SACOH,OAAOI,IAAd;CAHF;;AAMA,IAAMC,cAAc,SAAdA,WAAc,CAACC,MAAD,EAASV,KAAT,EAAgBW,OAAhB,EAA4B;MAC1C,CAACX,KAAL,EAAY;UACJ,IAAIY,KAAJ,CAAU,qBAAV,CAAN;;MAEE,CAACF,MAAL,EAAa;UACL,IAAIE,KAAJ,CAAU,sCAAV,CAAN;;SAEKC,UAAP,CAAkBC,OAAOC,OAAP,CAAeC,GAAjC,EAAsC,YAAM;QACtCC,OAAOP,OAAOQ,KAAP,CAAaC,eAAb,CAA6BT,OAAOU,YAAP,EAA7B,CAAX;QACIC,MAAMX,OAAOY,WAAP,EAAV;QACI,CAACL,IAAL,EAAW;UACLM,cAAcb,OAAOQ,KAAP,CAAaM,cAAb,CAA4BH,IAAII,UAAhC,CAAlB;aACOzB,MAAM0B,KAAN,CAAYC,MAAZ,CAAmBC,mBAAnB,CAAuCL,YAAYM,SAAZ,CAAsB,CAAtB,EAAyBR,IAAIS,MAA7B,CAAvC,CAAP;;;QAGEC,aAAahC,mBAAmBC,KAAnB,EAA0BiB,IAA1B,EAAgC,MAAhC,CAAjB;QACIc,UAAJ,EAAgB;;UAEVC,QAAQ,IAAIlB,OAAOmB,KAAX,CAAiBZ,IAAII,UAArB,EAAiCJ,IAAIS,MAAJ,GAAab,KAAKiB,MAAnD,EAA2Db,IAAII,UAA/D,EAA2EJ,IAAIS,MAA/E,CAAZ;UACIK,KAAK,EAAEC,OAAO,CAAT,EAAYC,OAAO,CAAnB,EAAT;UACIC,KAAK,EAAEC,YAAYJ,EAAd,EAAkBH,YAAlB,EAAyBxB,MAAMuB,UAA/B,EAA2CS,kBAAkB,IAA7D,EAAT;aACOC,YAAP,CAAoB,EAApB,EAAwB,CAACH,EAAD,CAAxB;;GAdJ;CAPF,CA0BA;;;;;;"}